<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>openstef.feature_engineering package &#8212; OpenSTEF  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script src="_static/documentation_options.js?v=8a448e45"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'openstef.feature_engineering';</script>
    <link rel="icon" href="_static/openstef.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="openstef.logging package" href="openstef.logging.html" />
    <link rel="prev" title="openstef.data_classes package" href="openstef.data_classes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
    <img src="_static/logo_openstef_small.png" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo_openstef_small.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="about_openstef.html">
                        About OpenSTEF
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="user_guides.html">
                        User guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="architecture_methodology_components.html">
                        Architecture, Methodology, and Components
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_reference.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="community.html">
                        Community
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/OpenSTEF/openstef" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/openstef/" title="Pypi" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-gift"></i></span>
            <label class="sr-only">Pypi</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://www.lfenergy.org/projects/openstef/" title="LFE Homepage" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-bolt"></i></span>
            <label class="sr-only">LFE Homepage</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="about_openstef.html">
                        About OpenSTEF
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="user_guides.html">
                        User guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="architecture_methodology_components.html">
                        Architecture, Methodology, and Components
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api_reference.html">
                        API reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="community.html">
                        Community
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/OpenSTEF/openstef" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/openstef/" title="Pypi" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-gift"></i></span>
            <label class="sr-only">Pypi</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://www.lfenergy.org/projects/openstef/" title="LFE Homepage" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fas fa-bolt"></i></span>
            <label class="sr-only">LFE Homepage</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="openstef.data_classes.html">openstef.data_classes package</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">openstef.feature_engineering package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.logging.html">openstef.logging package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.metrics.html">openstef.metrics package</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="openstef.model.html">openstef.model package</a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="openstef.model.metamodels.html">openstef.model.metamodels package</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstef.model.regressors.html">openstef.model.regressors package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="openstef.model_selection.html">openstef.model_selection package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.monitoring.html">openstef.monitoring package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.pipeline.html">openstef.pipeline package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.plotting.html">openstef.plotting package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.postprocessing.html">openstef.postprocessing package</a></li>
<li class="toctree-l1"><a class="reference internal" href="openstef.preprocessing.html">openstef.preprocessing package</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="openstef.tasks.html">openstef.tasks package</a><input checked class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="openstef.tasks.utils.html">openstef.tasks.utils package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="openstef.validation.html">openstef.validation package</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="openstef-feature-engineering-package">
<h1>openstef.feature_engineering package<a class="headerlink" href="#openstef-feature-engineering-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-openstef.feature_engineering.apply_features">
<span id="openstef-feature-engineering-apply-features-module"></span><h2>openstef.feature_engineering.apply_features module<a class="headerlink" href="#module-openstef.feature_engineering.apply_features" title="Link to this heading">¶</a></h2>
<p>This module provides functionality for applying features to the input data to improve forecast accuracy.</p>
<dl class="simple">
<dt>Examples of features that are added:</dt><dd><ul class="simple">
<li><p>The load 1 day and 7 days ago at the same time.</p></li>
<li><p>If a day is a weekday or a holiday.</p></li>
<li><p>The extrapolated windspeed at 100m.</p></li>
<li><p>The normalised wind power according to the turbine-specific power curve.</p></li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.apply_features.apply_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.apply_features.</span></span><span class="sig-name descname"><span class="pre">apply_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">24.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">years</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.apply_features.apply_features" title="Link to this definition">¶</a></dt>
<dd><p>Applies the feature functions defined in <code class="docutils literal notranslate"><span class="pre">feature_functions.py</span></code> and returns the complete dataframe.</p>
<p>Features requiring more recent label-data are omitted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the time derived features only the ones in the features list will be added. But for the weather features all will be added at present.
These unrequested additional features have to be filtered out later.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pandas.DataFrame</em>) – <p>a pandas dataframe with input data in the form:
pd.DataFrame(</p>
<blockquote>
<div><p>index=datetime,
columns=[label, predictor_1,…, predictor_n]</p>
</div></blockquote>
<p>)</p>
</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><em>PredictionJobDataClass</em></a>) – Prediction job.</p></li>
<li><p><strong>feature_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of requested features</p></li>
<li><p><strong>horizon</strong> (<em>float</em>) – Forecast horizon limit in hours.</p></li>
<li><p><strong>years</strong> (<em>list</em><em>[</em><em>int</em><em>] </em><em>| </em><em>None</em>) – years for which to create holiday features.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame(index = datetime, columns = [label, predictor_1,…, predictor_n, feature_1, …, feature_m])</p>
</dd>
</dl>
<p>Example output:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">geopy.geocoders</span><span class="w"> </span><span class="kn">import</span> <span class="n">Nominatim</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="s2">&quot;2017-01-01 09:00:00&quot;</span><span class="p">,</span>
<span class="n">freq</span> <span class="o">=</span> <span class="s1">&#39;15T&#39;</span><span class="p">,</span> <span class="n">periods</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span><span class="p">,</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">load</span><span class="o">=</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">hour</span><span class="o">/</span><span class="mi">24</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">*</span>
                    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">1.7</span><span class="p">,</span> <span class="mi">200</span><span class="p">)))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.bidding_zone_to_country_mapping">
<span id="openstef-feature-engineering-bidding-zone-to-country-mapping-module"></span><h2>openstef.feature_engineering.bidding_zone_to_country_mapping module<a class="headerlink" href="#module-openstef.feature_engineering.bidding_zone_to_country_mapping" title="Link to this heading">¶</a></h2>
</section>
<section id="module-openstef.feature_engineering.cyclic_features">
<span id="openstef-feature-engineering-cyclic-features-module"></span><h2>openstef.feature_engineering.cyclic_features module<a class="headerlink" href="#module-openstef.feature_engineering.cyclic_features" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.cyclic_features.add_daylight_terrestrial_feature">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.cyclic_features.</span></span><span class="sig-name descname"><span class="pre">add_daylight_terrestrial_feature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_to_terrestrial_radiation_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('/home/runner/work/openstef/openstef/openstef/data/NL_terrestrial_radiation.csv')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.cyclic_features.add_daylight_terrestrial_feature" title="Link to this definition">¶</a></dt>
<dd><p>Add daylight terrestrial radiation feature to the input dataset. This function processes terrestrial radiation
data and aligns it with the time indices of the input dataset. The terrestrial radiation data is normalized,
interpolated, and merged with the main dataset to provide a feature representing terrestrial radiation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – The input dataset containing a time-indexed DataFrame.</p></li>
<li><p><strong>path_to_terrestrial_radiation_csv</strong> (<em>str</em>) – File path to the CSV file containing terrestrial radiation data. The CSV file
should have a time-based index.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The input dataset with an added column for the terrestrial radiation feature.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The function assumes the input data and the terrestrial radiation data share
the same time zone and frequency alignment.</p></li>
<li><p>The terrestrial radiation values are normalized using z-score normalization.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.cyclic_features.add_seasonal_cyclic_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.cyclic_features.</span></span><span class="sig-name descname"><span class="pre">add_seasonal_cyclic_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compute_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.cyclic_features.add_seasonal_cyclic_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds cyclical features to capture seasonal and periodic patterns in time-based data.</p>
<p>Args:
- data (pd.DataFrame): DataFrame with a DatetimeIndex.
- compute_features (list): Optional. List of features to compute. Options are:</p>
<blockquote>
<div><p>[‘season’, ‘dayofweek’, ‘month’]. Default is all features.</p>
</div></blockquote>
<p>Returns:
- pd.DataFrame: DataFrame with added cyclical features.</p>
<p>Example:
&gt;&gt;&gt; data = pd.DataFrame(index=pd.date_range(start=’2023-01-01’, periods=365, freq=’D’))
&gt;&gt;&gt; data_with_features = add_cyclical_features(data)
&gt;&gt;&gt; print(data_with_features.head())</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.cyclic_features.add_time_cyclic_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.cyclic_features.</span></span><span class="sig-name descname"><span class="pre">add_time_cyclic_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.cyclic_features.add_time_cyclic_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds time of the day features cyclically encoded using sine and cosine to the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Dataframe indexed by datetime.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame that is the same as input dataframe with extra columns for the added time of the day features.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.data_preparation">
<span id="openstef-feature-engineering-data-preparation-module"></span><h2>openstef.feature_engineering.data_preparation module<a class="headerlink" href="#module-openstef.feature_engineering.data_preparation" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.ARDataPreparation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.data_preparation.</span></span><span class="sig-name descname"><span class="pre">ARDataPreparation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_specs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">historical_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.ARDataPreparation" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation" title="openstef.feature_engineering.data_preparation.AbstractDataPreparation"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractDataPreparation</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.ARDataPreparation.prepare_forecast_data">
<span class="sig-name descname"><span class="pre">prepare_forecast_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.ARDataPreparation.prepare_forecast_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.ARDataPreparation.prepare_train_data">
<span class="sig-name descname"><span class="pre">prepare_train_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.ARDataPreparation.prepare_train_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.AbstractDataPreparation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.data_preparation.</span></span><span class="sig-name descname"><span class="pre">AbstractDataPreparation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_specs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.AbstractDataPreparation.check_model">
<span class="sig-name descname"><span class="pre">check_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation.check_model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.AbstractDataPreparation.prepare_forecast_data">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prepare_forecast_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation.prepare_forecast_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.AbstractDataPreparation.prepare_train_data">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prepare_train_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation.prepare_train_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.LegacyDataPreparation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.data_preparation.</span></span><span class="sig-name descname"><span class="pre">LegacyDataPreparation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_specs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizons</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.LegacyDataPreparation" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation" title="openstef.feature_engineering.data_preparation.AbstractDataPreparation"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractDataPreparation</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.LegacyDataPreparation.prepare_forecast_data">
<span class="sig-name descname"><span class="pre">prepare_forecast_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.LegacyDataPreparation.prepare_forecast_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.data_preparation.LegacyDataPreparation.prepare_train_data">
<span class="sig-name descname"><span class="pre">prepare_train_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.data_preparation.LegacyDataPreparation.prepare_train_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-openstef.feature_engineering.feature_adder">
<span id="openstef-feature-engineering-feature-adder-module"></span><h2>openstef.feature_engineering.feature_adder module<a class="headerlink" href="#module-openstef.feature_engineering.feature_adder" title="Link to this heading">¶</a></h2>
<p>This module provides functionality for defining custom feature adders.</p>
<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureAdder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_adder.</span></span><span class="sig-name descname"><span class="pre">FeatureAdder</span></span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureAdder" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Abstract class that implement the FeatureAdder interface.</p>
<p>It is the basic block that handles the logic for computing the specific feature and the syntactic sugar to load
properly the feature adder according to the feature name.</p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureAdder.apply_features">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">apply_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parsed_feature_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureAdder.apply_features" title="Link to this definition">¶</a></dt>
<dd><p>Apply or add the features to the input dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureAdder.name">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureAdder.name" title="Link to this definition">¶</a></dt>
<dd><p>Name of the FeatureAdder.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureAdder.parse_feature_name">
<span class="sig-name descname"><span class="pre">parse_feature_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureAdder.parse_feature_name" title="Link to this definition">¶</a></dt>
<dd><p>Parse a feature name.</p>
<p>If the feature name is taken in charge by the feature adder, the method returns
a dictionnary with the potentially parsed parameters contained the feature name. In the
case the feature name does not contain parameters an empty dictionary is returned.
Otherwise the method returns None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>feature_name</strong> (<em>str</em>) – The feature name, this may contain parameter informations.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The parsed parameters. If the feature name is recognized but has no parameters
an empty dictionnary is returned. If the feature name is not recognized, None is
returned.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[dict[str, Any]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureAdder.required_features">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">required_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureAdder.required_features" title="Link to this definition">¶</a></dt>
<dd><p>List of features that are required to calculate this feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureDispatcher">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_adder.</span></span><span class="sig-name descname"><span class="pre">FeatureDispatcher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_adders</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureDispatcher" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Orchestrator of the feature adders.</p>
<p>It scans the feature_names to assign to each feature the proper feature adder and launch the effective computing of
the features.</p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureDispatcher.apply_features">
<span class="sig-name descname"><span class="pre">apply_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureDispatcher.apply_features" title="Link to this definition">¶</a></dt>
<dd><p>Applies features to the input DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame to which the features have to be added.</p></li>
<li><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Names of the features.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame with the added features.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.FeatureDispatcher.dispatch_features">
<span class="sig-name descname"><span class="pre">dispatch_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.FeatureDispatcher.dispatch_features" title="Link to this definition">¶</a></dt>
<dd><p>Dispatch features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The names of the features to be dispatched.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<a class="reference internal" href="#openstef.feature_engineering.feature_adder.FeatureAdder" title="openstef.feature_engineering.feature_adder.FeatureAdder"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeatureAdder</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<a class="reference internal" href="#openstef.feature_engineering.feature_adder.ParsedFeature" title="openstef.feature_engineering.feature_adder.ParsedFeature"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParsedFeature</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary with parsed features.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.ParsedFeature">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_adder.</span></span><span class="sig-name descname"><span class="pre">ParsedFeature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.ParsedFeature" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.ParsedFeature.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.ParsedFeature.name" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.ParsedFeature.params">
<span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.ParsedFeature.params" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.adders_from_module">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_adder.</span></span><span class="sig-name descname"><span class="pre">adders_from_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.adders_from_module" title="Link to this definition">¶</a></dt>
<dd><p>Load all FeatureAdders classes on the fly from the module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The name of the module from which to import.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<a class="reference internal" href="#openstef.feature_engineering.feature_adder.FeatureAdder" title="openstef.feature_engineering.feature_adder.FeatureAdder"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeatureAdder</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list with all loaded FeatureAdders.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_adder.adders_from_modules">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_adder.</span></span><span class="sig-name descname"><span class="pre">adders_from_modules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_names</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_adder.adders_from_modules" title="Link to this definition">¶</a></dt>
<dd><p>Load all FeatureAdders classes on the fly from multiple modules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A list with names of the modules from which to import.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<a class="reference internal" href="#openstef.feature_engineering.feature_adder.FeatureAdder" title="openstef.feature_engineering.feature_adder.FeatureAdder"><code class="xref py py-class docutils literal notranslate"><span class="pre">FeatureAdder</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list with all loaded FeatureAdders.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.feature_applicator">
<span id="openstef-feature-engineering-feature-applicator-module"></span><h2>openstef.feature_engineering.feature_applicator module<a class="headerlink" href="#module-openstef.feature_engineering.feature_applicator" title="Link to this heading">¶</a></h2>
<p>This module defines several FeatureApplicators.</p>
<p>These applicatiors are used to add features to the input data in the corresponding pipelines.</p>
<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_applicator.</span></span><span class="sig-name descname"><span class="pre">AbstractFeatureApplicator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">horizons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_modules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Defines the Applicator interface.</p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator.add_features">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator.add_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds features to an input DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame with input data to which the features have to be added</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – (Optional) A prediction job that is needed for location dependent features,
if not specified a default location is used</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dataframe with added features.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_applicator.OperationalPredictFeatureApplicator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_applicator.</span></span><span class="sig-name descname"><span class="pre">OperationalPredictFeatureApplicator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">horizons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_modules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_applicator.OperationalPredictFeatureApplicator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator" title="openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractFeatureApplicator</span></code></a></p>
<p>Feature applicator for use in operational forecasts.</p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_applicator.OperationalPredictFeatureApplicator.add_features">
<span class="sig-name descname"><span class="pre">add_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_applicator.OperationalPredictFeatureApplicator.add_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds features to an input DataFrame.</p>
<p>This method is implemented specifically for an operational prediction pipeline and will add every available feature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame with input data to which the features have to be added</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – (Optional) A prediction job that is needed for location dependent features,
if not specified a default location is used</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Input DataFrame with an extra column for every added feature.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_applicator.TrainFeatureApplicator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.feature_applicator.</span></span><span class="sig-name descname"><span class="pre">TrainFeatureApplicator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">horizons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_modules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_applicator.TrainFeatureApplicator" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator" title="openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractFeatureApplicator</span></code></a></p>
<p>Feature applicator for use during training.</p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.feature_applicator.TrainFeatureApplicator.add_features">
<span class="sig-name descname"><span class="pre">add_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">latency_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.feature_applicator.TrainFeatureApplicator.add_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds features to an input DataFrame.</p>
<p>This method is implemented specifically for a model train pipeline. For larger
horzions data is invalidated as when they are not available.</p>
<dl class="simple">
<dt>For example:</dt><dd><p>For horzion 24 hours the feature T-720min is not added as the load
720 minutes ago is not available 24 hours in advance. In case of a horizon
0.25 hours this feature is added as in this case the feature is available.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Input data to which the features will be added.</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – (Optional) A prediction job that is needed for location dependent features,
if not specified a default location is used</p></li>
<li><p><strong>latency_config</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – (Optional) Invalidate certain features that are not
available for a specific horizon due to data latency. Defaults to
<code class="docutils literal notranslate"><span class="pre">{&quot;day_ahead_electricity_price&quot;:</span> <span class="pre">24}</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Input DataFrame with an extra column for every added feature and sorted on the datetime index.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-openstef.feature_engineering.general">
<span id="openstef-feature-engineering-general-module"></span><h2>openstef.feature_engineering.general module<a class="headerlink" href="#module-openstef.feature_engineering.general" title="Link to this heading">¶</a></h2>
<p>This modelu contains various helper functions.</p>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.general.add_missing_feature_columns">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.general.</span></span><span class="sig-name descname"><span class="pre">add_missing_feature_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.general.add_missing_feature_columns" title="Link to this definition">¶</a></dt>
<dd><p>Adds feature column for features in the featurelist.</p>
<p>Add feature columns for features in the feature list if these columns don’t
exist in the input data. If a column is added, its value is set to NaN.
This is especially usefull to make sure the required columns are in place when
making a prediction.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is intended as a final check to prevent errors during predicion.
In an ideal world this function is not nescarry.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame with input data and featurs.</p></li>
<li><p><strong>features</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – List of requiered features.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Input dataframe with missing columns filled with <code class="docutils literal notranslate"><span class="pre">np.N=nan</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.general.enforce_feature_order">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.general.</span></span><span class="sig-name descname"><span class="pre">enforce_feature_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.general.enforce_feature_order" title="Link to this definition">¶</a></dt>
<dd><p>Enforces correct order of features.</p>
<p>Alphabetically orders the feature columns. The load column remains the first column
and the horizons column remains the last column.
Everything in between is alphabetically sorted:
The order eventually looks like this:
[“load”] – [alphabetically sorted features] – [‘horizon’]</p>
<p>This function assumes the first column contains the to be predicted variable
Furthermore the “horizon” is moved to the last position if it is pressent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Input data with features.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Properly sorted input data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.general.remove_non_requested_feature_columns">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.general.</span></span><span class="sig-name descname"><span class="pre">remove_non_requested_feature_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requested_features</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.general.remove_non_requested_feature_columns" title="Link to this definition">¶</a></dt>
<dd><p>Removes features that are provided in the input data but not in the feature list.</p>
<p>This should not be nescesarry but serves as an extra failsave for making predicitons</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – DataFrame with features</p></li>
<li><p><strong>requested_features</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – List of reuqested features</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Model input data with features.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.holiday_features">
<span id="openstef-feature-engineering-holiday-features-module"></span><h2>openstef.feature_engineering.holiday_features module<a class="headerlink" href="#module-openstef.feature_engineering.holiday_features" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.holiday_features.check_for_bridge_day">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.holiday_features.</span></span><span class="sig-name descname"><span class="pre">check_for_bridge_day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">country</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">years</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_functions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bridge_days</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.holiday_features.check_for_bridge_day" title="Link to this definition">¶</a></dt>
<dd><p>Checks for bridgedays associated to a specific holiday with date (date).</p>
<p>Any found bridgedays are appende dto the bridgedays list. Also a specific feature
function for the bridgeday is added to the general holidayfuncitons dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>date</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code>) – Date of holiday to check for associated bridgedays.</p></li>
<li><p><strong>holiday_name</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the holiday.</p></li>
<li><p><strong>country</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Country for which to detect the bridgedays.</p></li>
<li><p><strong>years</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>) – List of years for which to detect bridgedays.</p></li>
<li><p><strong>holiday_functions</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – Dictionary to which the featurefunction has to be appended to in case of a bridgeday.</p></li>
<li><p><strong>bridge_days</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>) – List of bridgedays to which any found bridgedays have to be appended.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>Dict with holiday feature functions</p></li>
<li><p>List of bridgedays</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.holiday_features.generate_holiday_feature_functions">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.holiday_features.</span></span><span class="sig-name descname"><span class="pre">generate_holiday_feature_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">country_code</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'NL'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">years</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_to_school_holidays_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">PosixPath('/home/runner/work/openstef/openstef/openstef/data/dutch_holidays.csv')</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.holiday_features.generate_holiday_feature_functions" title="Link to this definition">¶</a></dt>
<dd><p>Generates functions for creating holiday feature.</p>
<p>This improves forecast accuracy. Examples of features that are
added are: 2020-01-01 is ‘Nieuwjaarsdag’.</p>
<blockquote>
<div><p>2022-12-24 - 2023-01-08 is the ‘Kerstvakantie’
2022-10-15 - 2022-10-23 is the ‘HerfstvakantieNoord’</p>
</div></blockquote>
<p>The holidays are based on a manually generated csv file.
The information is collected using:
<a class="reference external" href="https://www.schoolvakanties-nederland.nl/">https://www.schoolvakanties-nederland.nl/</a> and the python holiday function
The official following official ducth holidays are included untill 2023:</p>
<blockquote>
<div><ul class="simple">
<li><p>Kerstvakantie</p></li>
<li><p>Meivakantie</p></li>
<li><p>Herstvakantie</p></li>
<li><p>Bouwvak</p></li>
<li><p>Zomervakantie</p></li>
<li><p>Voorjaarsvakantie</p></li>
<li><p>Nieuwjaarsdag</p></li>
<li><p>Pasen</p></li>
<li><p>Koningsdag</p></li>
<li><p>Hemelvaart</p></li>
<li><p>Pinksteren</p></li>
<li><p>Kerst</p></li>
</ul>
</div></blockquote>
<p>The ‘Brugdagen’ are updated untill dec 2020. (Generated using agenda)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>country_code</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Country for which to create holiday features.</p></li>
<li><p><strong>years</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]]) – years for which to create holiday features. If None,
the last 4 years, the current and next year are used.</p></li>
<li><p><strong>path_to_school_holidays_csv</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Filepath to csv with school holidays.</p></li>
<li><p><strong>NOTE</strong> – Dutch holidays csv file is only until January 2026.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dictionary with functions that check if a given date is a holiday, keys
consist of “Is” + the_name_of_the_holiday_to_be_checked</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.lag_features">
<span id="openstef-feature-engineering-lag-features-module"></span><h2>openstef.feature_engineering.lag_features module<a class="headerlink" href="#module-openstef.feature_engineering.lag_features" title="Link to this heading">¶</a></h2>
<p>This module contains all lag features.</p>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.lag_features.extract_lag_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.lag_features.</span></span><span class="sig-name descname"><span class="pre">extract_lag_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">24.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.lag_features.extract_lag_features" title="Link to this definition">¶</a></dt>
<dd><p>Creates a list of lag minutes and a list of lag days that were used during the training of the input model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – All requested lag features</p></li>
<li><p><strong>horizon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Forecast horizon limit in hours.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>List of minute lags that were used as features during training.</p></li>
<li><p>List of days lags that were used as features during training.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.lag_features.generate_lag_feature_functions">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.lag_features.</span></span><span class="sig-name descname"><span class="pre">generate_lag_feature_functions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">24.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.lag_features.generate_lag_feature_functions" title="Link to this definition">¶</a></dt>
<dd><p>Creates functions to generate lag features in a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – minute lagtimes that where used during training
of the model. If empty a new set will be automatically generated.</p></li>
<li><p><strong>horizon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Forecast horizon limit in hours.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Lag functions.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">lag_functions</span> <span class="o">=</span> <span class="n">generate_lag_functions</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">minute_list</span><span class="p">,</span><span class="n">h_ahead</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.lag_features.generate_non_trivial_lag_times">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.lag_features.</span></span><span class="sig-name descname"><span class="pre">generate_non_trivial_lag_times</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.lag_features.generate_non_trivial_lag_times" title="Link to this definition">¶</a></dt>
<dd><p>Calculate an autocorrelation curve of the load trace.</p>
<p>This curve is subsequently used to add additional lag times as features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Dataframe with input data in the form pd.DataFrame(index = datetime,
columns = [label, predictor_1,…, predictor_n])</p></li>
<li><p><strong>height_threshold</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Minimal autocorrelation value to be recognized as a peak.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Aditional non-trivial minute lags</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.lag_features.generate_trivial_lag_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.lag_features.</span></span><span class="sig-name descname"><span class="pre">generate_trivial_lag_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">horizon</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.lag_features.generate_trivial_lag_features" title="Link to this definition">¶</a></dt>
<dd><p>Generates relevant lag times for lag feature function creation.</p>
<p>This function is mostly used during training of models and not during predicting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>horizon</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – Forecast horizon limit in hours.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>List of minute lags that were used as features during training.</p></li>
<li><p>List of days lags that were used as features during training.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.missing_values_transformer">
<span id="openstef-feature-engineering-missing-values-transformer-module"></span><h2>openstef.feature_engineering.missing_values_transformer module<a class="headerlink" href="#module-openstef.feature_engineering.missing_values_transformer" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.missing_values_transformer.</span></span><span class="sig-name descname"><span class="pre">MissingValuesTransformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">missing_values</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imputation_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_fill_future_values_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>MissingValuesTransformer handles missing values in data by imputing them with a given strategy.</p>
<p>It also removes columns that are always null from the data.</p>
<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.fit" title="Link to this definition">¶</a></dt>
<dd><p>Fit the imputer on the input data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.fit_transform">
<span class="sig-name descname"><span class="pre">fit_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.fit_transform" title="Link to this definition">¶</a></dt>
<dd><p>Fit the imputer on the input data and transform it.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>, <code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The data with missing values imputed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.in_feature_names">
<span class="sig-name descname"><span class="pre">in_feature_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.in_feature_names" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.non_null_feature_names">
<span class="sig-name descname"><span class="pre">non_null_feature_names</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.non_null_feature_names" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.transform" title="Link to this definition">¶</a></dt>
<dd><p>Transform the input data by imputing missing values.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-openstef.feature_engineering.rolling_features">
<span id="openstef-feature-engineering-rolling-features-module"></span><h2>openstef.feature_engineering.rolling_features module<a class="headerlink" href="#module-openstef.feature_engineering.rolling_features" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.rolling_features.add_rolling_aggregate_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.rolling_features.</span></span><span class="sig-name descname"><span class="pre">add_rolling_aggregate_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolling_window</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">datetime.timedelta(days=1)</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.rolling_features.add_rolling_aggregate_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds rolling aggregate features to the input dataframe.</p>
<p>These features are calculated with an aggregation over a rolling window of the data.
A list of requested features is used to determine whether to add the rolling features
or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Input dataframe to which the rolling features will be added.</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – Prediction job data.</p></li>
<li><p><strong>rolling_window</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code>) – Rolling window size for the aggregation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame with added rolling features.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.rolling_features.convert_timedelta_to_isoformat">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.rolling_features.</span></span><span class="sig-name descname"><span class="pre">convert_timedelta_to_isoformat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">td</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.rolling_features.convert_timedelta_to_isoformat" title="Link to this definition">¶</a></dt>
<dd><p>Converts a timedelta to an ISO 8601 formatted period string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>td</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code>) – timedelta object to convert.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>ISO 8601 formatted period string.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering.weather_features">
<span id="openstef-feature-engineering-weather-features-module"></span><h2>openstef.feature_engineering.weather_features module<a class="headerlink" href="#module-openstef.feature_engineering.weather_features" title="Link to this heading">¶</a></h2>
<p>This module contains all wheather related functions used for feature engineering.</p>
<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.add_additional_solar_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">add_additional_solar_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.add_additional_solar_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds additional solar features to the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Dataframe to which the solar features have to be added</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – prediction job which should at least contain the latitude and longitude location.</p></li>
<li><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – List of requested features</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame same as input dataframe with extra columns for the added solar features</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.add_additional_wind_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">add_additional_wind_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.add_additional_wind_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds additional wind features to the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Dataframe to which the wind features have to be added</p></li>
<li><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – List of requested features</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>DataFrame same as input dataframe with extra columns for the added wind features</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.add_humidity_features">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">add_humidity_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.add_humidity_features" title="Link to this definition">¶</a></dt>
<dd><p>Adds humidity features to the input dataframe.</p>
<p>These features are calculated using functions defines in this module. A list of
requested features is used to determine whether to add the humidity features or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Input dataframe to which features have to be added</p></li>
<li><p><strong>feature_names</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – list of requested features.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Same as input dataframe with extra columns for the humidty features.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calc_air_density">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calc_air_density</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pressure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rh</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calc_air_density" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the dewpoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temperature</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – The temperature in C</p></li>
<li><p><strong>pressure</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – the atmospheric pressure in Pa</p></li>
<li><p><strong>rh</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – Relative humidity</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The air density (kg/m^3)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calc_dewpoint">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calc_dewpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vapour_pressure</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calc_dewpoint" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the dewpoint, see <a class="reference external" href="https://en.wikipedia.org/wiki/Dew_point">https://en.wikipedia.org/wiki/Dew_point</a> for mroe info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>vapour_pressure</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – The vapour pressure for which the dewpoint should be calculated</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dewpoint</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calc_saturation_pressure">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calc_saturation_pressure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calc_saturation_pressure" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the water vapour pressure from the temperature.</p>
<p>See <a class="reference external" href="https://www.vaisala.com/sites/default/files/documents/Humidity_Conversion_Formulas_B210973EN-F.pdf">https://www.vaisala.com/sites/default/files/documents/Humidity_Conversion_Formulas_B210973EN-F.pdf</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>temperature</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – Temperature in C</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The saturation pressure of water at the respective temperature</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calc_vapour_pressure">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calc_vapour_pressure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psat</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calc_vapour_pressure" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the vapour pressure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rh</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – Relative humidity</p></li>
<li><p><strong>psat</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – Saturation pressure: see calc_saturation_pressure</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The water vapour pressure</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calculate_dni">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calculate_dni</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radiation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calculate_dni" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the direct normal irradiance (DNI).</p>
<p>This function uses the predicted radiation and information derived from the location (obtained from pj)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radiation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>) – predicted radiation including DatetimeIndex with right time-zone</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – PredictJob including information about the location (lat, lon)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Direct normal irradiance (DNI).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calculate_gti">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calculate_gti</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radiation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface_tilt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">34.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface_azimuth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">180</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calculate_gti" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the GTI/POA using the radiation.</p>
<p>This function assumes Global Tilted Irradiance (GTI) = Plane of Array (POA)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>radiation</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>) – pandas series with DatetimeIndex with right timezone information</p></li>
<li><p><strong>pj</strong> (<a class="reference internal" href="openstef.data_classes.html#openstef.data_classes.prediction_job.PredictionJobDataClass" title="openstef.data_classes.prediction_job.PredictionJobDataClass"><code class="xref py py-class docutils literal notranslate"><span class="pre">PredictionJobDataClass</span></code></a>) – prediction job which should at least contain the latitude and longitude location.</p></li>
<li><p><strong>surface_tilt</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – The tilt of the surface of, for example, your PhotoVoltaic-system.</p></li>
<li><p><strong>surface_azimuth</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – The way the surface is facing. South facing 180 degrees, North facing 0 degrees, East facing 90 degrees and West facing 270 degrees</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Global Tilted Irradiance (GTI)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calculate_windspeed_at_hubheight">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calculate_windspeed_at_hubheight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">windspeed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromheight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hub_height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calculate_windspeed_at_hubheight" title="Link to this definition">¶</a></dt>
<dd><p>Calculate windspeed at hubheight.</p>
<p>Calculates the windspeed at hubheigh by extrapolation from a given height to a given
hub height using the wind power law <a class="reference external" href="https://en.wikipedia.org/wiki/Wind_profile_power_law">https://en.wikipedia.org/wiki/Wind_profile_power_law</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>windspeed</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>]) – float OR pandas series of windspeed at height = height</p></li>
<li><p><strong>fromheight</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – height (m) of the windspeed data. Default is 10m</p></li>
<li><p><strong>hubheight</strong> – height (m) of the turbine</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Windspeed at hubheight.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.calculate_windturbine_power_output">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">calculate_windturbine_power_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">windspeed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_turbines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">turbine_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.calculate_windturbine_power_output" title="Link to this definition">¶</a></dt>
<dd><p>Calculate wind turbine power output.</p>
<p>These values are related through the power curve, which is described by turbine_data.
If no turbine_data is given, default values are used and results are normalized to 1MWp.
If n_turbines=0, the result is normalized to a rated power of 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>windspeed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code>) – pd.DataFrame(index = datetime, columns = [“windspeedHub”])</p></li>
<li><p><strong>nTurbines</strong> – The number of turbines</p></li>
<li><p><strong>turbineData</strong> – slope_center, rated_power, steepness</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame(index = datetime, columns = [“forecast”])</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="openstef.feature_engineering.weather_features.humidity_calculations">
<span class="sig-prename descclassname"><span class="pre">openstef.feature_engineering.weather_features.</span></span><span class="sig-name descname"><span class="pre">humidity_calculations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temperature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pressure</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openstef.feature_engineering.weather_features.humidity_calculations" title="Link to this definition">¶</a></dt>
<dd><p>Function that calculates weather features based on humidity..</p>
<dl class="simple">
<dt>These features are:</dt><dd><ul class="simple">
<li><p>Saturation pressure</p></li>
<li><p>Vapour pressure</p></li>
<li><p>Dewpoint</p></li>
<li><p>Air density</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temperature</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – Temperature in C</p></li>
<li><p><strong>rh</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – Relative humidity in %</p></li>
<li><p><strong>pressure</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]) – The air pressure in hPa</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>If the input is an np.ndarray; a pandas dataframe with the calculated moisture indices,
if the input is numeric; a dict with the calculated moisture indices</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-openstef.feature_engineering">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-openstef.feature_engineering" title="Link to this heading">¶</a></h2>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="openstef.data_classes.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">openstef.data_classes package</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="openstef.logging.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">openstef.logging package</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.apply_features">
   openstef.feature_engineering.apply_features module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.apply_features.apply_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       apply_features()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.bidding_zone_to_country_mapping">
   openstef.feature_engineering.bidding_zone_to_country_mapping module
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.cyclic_features">
   openstef.feature_engineering.cyclic_features module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.cyclic_features.add_daylight_terrestrial_feature">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_daylight_terrestrial_feature()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.cyclic_features.add_seasonal_cyclic_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_seasonal_cyclic_features()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.cyclic_features.add_time_cyclic_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_time_cyclic_features()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.data_preparation">
   openstef.feature_engineering.data_preparation module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.ARDataPreparation">
     <code class="docutils literal notranslate">
      <span class="pre">
       ARDataPreparation
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.ARDataPreparation.prepare_forecast_data">
       <code class="docutils literal notranslate">
        <span class="pre">
         ARDataPreparation.prepare_forecast_data()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.ARDataPreparation.prepare_train_data">
       <code class="docutils literal notranslate">
        <span class="pre">
         ARDataPreparation.prepare_train_data()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation">
     <code class="docutils literal notranslate">
      <span class="pre">
       AbstractDataPreparation
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation.check_model">
       <code class="docutils literal notranslate">
        <span class="pre">
         AbstractDataPreparation.check_model()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation.prepare_forecast_data">
       <code class="docutils literal notranslate">
        <span class="pre">
         AbstractDataPreparation.prepare_forecast_data()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.AbstractDataPreparation.prepare_train_data">
       <code class="docutils literal notranslate">
        <span class="pre">
         AbstractDataPreparation.prepare_train_data()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.LegacyDataPreparation">
     <code class="docutils literal notranslate">
      <span class="pre">
       LegacyDataPreparation
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.LegacyDataPreparation.prepare_forecast_data">
       <code class="docutils literal notranslate">
        <span class="pre">
         LegacyDataPreparation.prepare_forecast_data()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.data_preparation.LegacyDataPreparation.prepare_train_data">
       <code class="docutils literal notranslate">
        <span class="pre">
         LegacyDataPreparation.prepare_train_data()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.feature_adder">
   openstef.feature_engineering.feature_adder module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureAdder">
     <code class="docutils literal notranslate">
      <span class="pre">
       FeatureAdder
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureAdder.apply_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         FeatureAdder.apply_features()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureAdder.name">
       <code class="docutils literal notranslate">
        <span class="pre">
         FeatureAdder.name
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureAdder.parse_feature_name">
       <code class="docutils literal notranslate">
        <span class="pre">
         FeatureAdder.parse_feature_name()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureAdder.required_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         FeatureAdder.required_features()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureDispatcher">
     <code class="docutils literal notranslate">
      <span class="pre">
       FeatureDispatcher
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureDispatcher.apply_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         FeatureDispatcher.apply_features()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.FeatureDispatcher.dispatch_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         FeatureDispatcher.dispatch_features()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.ParsedFeature">
     <code class="docutils literal notranslate">
      <span class="pre">
       ParsedFeature
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.ParsedFeature.name">
       <code class="docutils literal notranslate">
        <span class="pre">
         ParsedFeature.name
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.ParsedFeature.params">
       <code class="docutils literal notranslate">
        <span class="pre">
         ParsedFeature.params
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.adders_from_module">
     <code class="docutils literal notranslate">
      <span class="pre">
       adders_from_module()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_adder.adders_from_modules">
     <code class="docutils literal notranslate">
      <span class="pre">
       adders_from_modules()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.feature_applicator">
   openstef.feature_engineering.feature_applicator module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator">
     <code class="docutils literal notranslate">
      <span class="pre">
       AbstractFeatureApplicator
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_applicator.AbstractFeatureApplicator.add_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         AbstractFeatureApplicator.add_features()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_applicator.OperationalPredictFeatureApplicator">
     <code class="docutils literal notranslate">
      <span class="pre">
       OperationalPredictFeatureApplicator
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_applicator.OperationalPredictFeatureApplicator.add_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         OperationalPredictFeatureApplicator.add_features()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_applicator.TrainFeatureApplicator">
     <code class="docutils literal notranslate">
      <span class="pre">
       TrainFeatureApplicator
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.feature_applicator.TrainFeatureApplicator.add_features">
       <code class="docutils literal notranslate">
        <span class="pre">
         TrainFeatureApplicator.add_features()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.general">
   openstef.feature_engineering.general module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.general.add_missing_feature_columns">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_missing_feature_columns()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.general.enforce_feature_order">
     <code class="docutils literal notranslate">
      <span class="pre">
       enforce_feature_order()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.general.remove_non_requested_feature_columns">
     <code class="docutils literal notranslate">
      <span class="pre">
       remove_non_requested_feature_columns()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.holiday_features">
   openstef.feature_engineering.holiday_features module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.holiday_features.check_for_bridge_day">
     <code class="docutils literal notranslate">
      <span class="pre">
       check_for_bridge_day()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.holiday_features.generate_holiday_feature_functions">
     <code class="docutils literal notranslate">
      <span class="pre">
       generate_holiday_feature_functions()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.lag_features">
   openstef.feature_engineering.lag_features module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.lag_features.extract_lag_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       extract_lag_features()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.lag_features.generate_lag_feature_functions">
     <code class="docutils literal notranslate">
      <span class="pre">
       generate_lag_feature_functions()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.lag_features.generate_non_trivial_lag_times">
     <code class="docutils literal notranslate">
      <span class="pre">
       generate_non_trivial_lag_times()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.lag_features.generate_trivial_lag_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       generate_trivial_lag_features()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.missing_values_transformer">
   openstef.feature_engineering.missing_values_transformer module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer">
     <code class="docutils literal notranslate">
      <span class="pre">
       MissingValuesTransformer
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.fit">
       <code class="docutils literal notranslate">
        <span class="pre">
         MissingValuesTransformer.fit()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.fit_transform">
       <code class="docutils literal notranslate">
        <span class="pre">
         MissingValuesTransformer.fit_transform()
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.in_feature_names">
       <code class="docutils literal notranslate">
        <span class="pre">
         MissingValuesTransformer.in_feature_names
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.non_null_feature_names">
       <code class="docutils literal notranslate">
        <span class="pre">
         MissingValuesTransformer.non_null_feature_names
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#openstef.feature_engineering.missing_values_transformer.MissingValuesTransformer.transform">
       <code class="docutils literal notranslate">
        <span class="pre">
         MissingValuesTransformer.transform()
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.rolling_features">
   openstef.feature_engineering.rolling_features module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.rolling_features.add_rolling_aggregate_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_rolling_aggregate_features()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.rolling_features.convert_timedelta_to_isoformat">
     <code class="docutils literal notranslate">
      <span class="pre">
       convert_timedelta_to_isoformat()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering.weather_features">
   openstef.feature_engineering.weather_features module
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.add_additional_solar_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_additional_solar_features()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.add_additional_wind_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_additional_wind_features()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.add_humidity_features">
     <code class="docutils literal notranslate">
      <span class="pre">
       add_humidity_features()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calc_air_density">
     <code class="docutils literal notranslate">
      <span class="pre">
       calc_air_density()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calc_dewpoint">
     <code class="docutils literal notranslate">
      <span class="pre">
       calc_dewpoint()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calc_saturation_pressure">
     <code class="docutils literal notranslate">
      <span class="pre">
       calc_saturation_pressure()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calc_vapour_pressure">
     <code class="docutils literal notranslate">
      <span class="pre">
       calc_vapour_pressure()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calculate_dni">
     <code class="docutils literal notranslate">
      <span class="pre">
       calculate_dni()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calculate_gti">
     <code class="docutils literal notranslate">
      <span class="pre">
       calculate_gti()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calculate_windspeed_at_hubheight">
     <code class="docutils literal notranslate">
      <span class="pre">
       calculate_windspeed_at_hubheight()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.calculate_windturbine_power_output">
     <code class="docutils literal notranslate">
      <span class="pre">
       calculate_windturbine_power_output()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#openstef.feature_engineering.weather_features.humidity_calculations">
     <code class="docutils literal notranslate">
      <span class="pre">
       humidity_calculations()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-openstef.feature_engineering">
   Module contents
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="_sources/openstef.feature_engineering.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2017-2023 Contributors to the OpenSTEF project.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.3.7.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>